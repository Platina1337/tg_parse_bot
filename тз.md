# Техническое задание для Telegram Parse Bot

## Новые задачи для реализации

### 1. Новый бот для доступа в приватку
- **Цель**: Создать отдельного Telegram бота для управления доступом к приватному каналу
- **Функционал**:
  - Управление подпиской пользователей
  - Предоставление временного/постоянного доступа
  - Интеграция с платежными системами (звезды Telegram, переводы на карту)
  - Проверка платежей и автоматическое добавление пользователей

### 2. Автоматическое проставление реакций после пересылки
- **Цель**: Добавить возможность автоматически ставить реакции на только что пересланные посты
- **Требования**:
  - Настройка реакций в параметрах парсинг+пересылки
  - Автоматическая постановка реакций сразу после успешной пересылки поста
  - Выбор эмодзи для реакций (несколько вариантов)
  - Задержка между постановкой реакций (чтобы не попасть под FloodWait)
  - Логирование процесса постановки реакций

### 3. Бот для доступа в приватный канал
- **Цель**: Создать бота для управления доступом к ОДНОМУ приватному каналу
- **Типы доступа**:
  - **Бесплатный пробный**: Доступ на 2-3 дня для тестирования
  - **Платный на месяц**: 200 звезд Telegram
  - **Платный постоянный**: 700 рублей навсегда
- **Способы оплаты**:
  - Звезды Telegram (автоматическая генерация ссылок в приватке)
  - Переводы на карту (проверка чеков администратором)
  - Криптовалюта (USDT, BTC, ETH) - генерация кошельков/ссылок для оплаты
- **Функционал бота доступа**:
  - /start - приветствие и выбор типа доступа
  - Меню выбора периода (пробный/месяц/навсегда)
  - Выбор способа оплаты (звезды/карта/крипта)
  - Для звезд: автоматическая генерация и отправка ссылки
  - Для карты: инструкция по оплате + прикрепление чека пользователем
  - Для крипты: выбор валюты (USDT/BTC/ETH) + генерация кошелька/ссылки + инструкции
  - Проверка платежей администратором
  - Автоматическое добавление в приватку после подтверждения
  - Автоматическое исключение пользователей по истечению срока (для пробного доступа)
  - База данных для отслеживания пользователей и сроков доступа

### 4. Пересылка в несколько каналов одной задачей
- **Цель**: Возможность настройки одной задачи парсинг+пересылки для одновременной отправки в несколько целевых каналов
- **Требования**:
  - Выбор нескольких целевых каналов при настройке задачи
  - Единые настройки для всех каналов (фильтры, текст, реакции и т.д.)
  - Последовательная или параллельная отправка в каналы (на выбор)
  - Логирование результатов для каждого канала отдельно
  - Возможность остановки отправки в конкретный канал без остановки всей задачи
  - Статистика по каждому каналу (сколько постов пересланно, ошибки и т.д.)

## Технические детали реализации

### Архитектура
- Отдельный бот для доступа к приватному каналу (новый экземпляр)
- Интеграция с основным ботом через shared API
- База данных для хранения пользователей, платежей, сроков доступа (бесплатный/платный)
- Автоматическая проверка и исключение пользователей по истечению срока
- Кэширование для оптимизации проверок доступа
- Интеграция с крипто-кошельками/API для генерации платежных ссылок
- Webhook'и для автоматического подтверждения крипто-платежей (опционально)

### Безопасность
- Валидация платежей перед предоставлением доступа
- Защита от повторных использований ссылок/чеков
- Логирование всех действий пользователей и администратора
- Мониторинг крипто-кошельков на предмет мошенничества
- Резервное копирование приватных ключей кошельков
- Проверка суммы и адреса отправителя при крипто-платежах

### UX/UI
- Интуитивное меню выбора подписки
- Четкие инструкции по оплате
- Статус подписки и время до истечения
- Уведомления об истечении доступа
- Выбор криптовалюты с иконками и понятными названиями
- QR-коды для удобного сканирования адресов кошельков
- Подробные инструкции по оплате криптой с примерами

## Приоритет реализации
1. Бот для доступа в приватный канал (базовая функциональность)
2. Пересылка в несколько каналов
3. Автоматические реакции после пересылки

Попробовать создать еще одну сессию для того же аккаунта в тг чтобы обойти floodwait


Один канал для платного контента и пересылка его в сетку каналов